<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>AWS Simple Queue Service (SQS)*** - Anand vyas</title>
    <meta content="AWS Simple Queue Service (SQS)*** - Anand vyas" property="og:title">
    <meta content="" name="keywords">
    <meta content="" property="og:description">
    <meta name="author" content="Anand Vyas">

    
    <link href="https://anandvyas.in/css/bootstrap.min.css" rel="stylesheet">
    
    <link href="https://anandvyas.in/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    
    <link href="https://anandvyas.in/css/highlighter.css" rel="stylesheet">
    
    <link href="https://anandvyas.in/css/sb-admin.css" rel="stylesheet">
    <link href="https://anandvyas.in/css/about.css" rel="stylesheet">

    <script src="https://anandvyas.in/js/jquery.min.js"></script>
</head>
<body class="fixed-nav sticky-footer bg-dark sidenav-toggled" id="page-top">
  
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top" id="mainNav">
    <a class="navbar-brand" href="https://anandvyas.in/">
        <img src="https://anandvyas.in/images/profile/logo.png" />
        <span>Anand vyas</span>
    </a>
    <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive"
        aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarResponsive">
        <ul class="navbar-nav navbar-sidenav">
            <li class="nav-item sidebar-profile text-center">
                <div class="profile-pic">
                    <img src="https://anandvyas.in/images/profile/avatar.jpg" alt="avatar">
                </div>
                <div class="profile-detail">
                    
                    <span>Solution Architect</span> 
                    <span>Cloud Architect</span> 
                    <span>DevOps</span> 
                    <span>Tech Lead</span> 
                </div>
            </li>
            
            <li class="nav-item sidebar-menu" data-toggle="tooltip" data-placement="right" title="Home">
                <a class="nav-link" href="https://anandvyas.in/">
                <i class="fa fa-fw fa fa-home"></i>
                <span class="nav-link-text">Home</span>
                </a>
            </li>
            
            <li class="nav-item sidebar-menu" data-toggle="tooltip" data-placement="right" title="About">
                <a class="nav-link" href="https://anandvyas.in/about">
                <i class="fa fa-fw fa fa-user-circle"></i>
                <span class="nav-link-text">About</span>
                </a>
            </li>
            
            <li class="nav-item sidebar-menu" data-toggle="tooltip" data-placement="right" title="Categories">
                <a class="nav-link" href="https://anandvyas.in/categories">
                <i class="fa fa-fw fa fa-dashboard"></i>
                <span class="nav-link-text">Categories</span>
                </a>
            </li>
            
            <li class="nav-item sidebar-menu" data-toggle="tooltip" data-placement="right" title="Tags">
                <a class="nav-link" href="https://anandvyas.in/tags">
                <i class="fa fa-fw fa fa-tags"></i>
                <span class="nav-link-text">Tags</span>
                </a>
            </li>
            
        </ul>
        <ul class="navbar-nav sidenav-social">
            
            <li><a href="#" target="_blank"><i class="fa fa-mobile"></i></a></li>
            
            <li><a href="mailto:anandvyas@live.com" target="_blank"><i class="fa fa-envelope"></i></a></li>
            
            <li><a href="https://twitter.com/anandvyaas" target="_blank"><i class="fa fa-twitter"></i></a></li>
            
            <li><a href="https://www.linkedin.com/in/anandvyaas" target="_blank"><i class="fa fa-linkedin"></i></a></li>
            
            <li><a href="https://www.instagram.com/anandvyaas" target="_blank"><i class="fa fa-instagram"></i></a></li>
            
            <li><a href="https://github.com/anandvyas" target="_blank"><i class="fa fa-github"></i></a></li>
            
            <li><a href="https://stackoverflow.com/users/8208060/anand-vyas" target="_blank"><i class="fa fa-stack-overflow"></i></a></li>
            
        </ul>
        <ul class="navbar-nav sidenav-toggler">
            <li class="nav-item">
                <a class="nav-link text-center" id="sidenavToggler">
            <i class="fa fa-fw fa-angle-left"></i>
            </a>
            </li>
        </ul>
        
        
    </div>
</nav>
  
  <div class="content-wrapper">
    <div class="container-fluid">
    


<ol class="breadcrumb">
    <li class="breadcrumb-item"><a href="https://anandvyas.in/">Home</a></li>


    
    <li class="breadcrumb-item active"><a href='https://anandvyas.in/aws'>aws</a></li>
    
    


    
    <li class="breadcrumb-item active"><a href='https://anandvyas.in/aws/aws-sqs'>aws-sqs</a></li>
    
    


    

</ol>

        <div class="post">
            <h1>AWS Simple Queue Service (SQS)***</h1>
            <span class="post-date">Wed, Aug 2, 2017</span>
            <p>Amazon Simple Queue Service (SQS) is a fast, reliable, scalable, fully managed message queuing service. SQS makes it simple and cost-effective to decouple the components of a cloud application. You can use SQS to transmit any volume of data, at any level of throughput, without losing messages or requiring other services to be always available.</p>

<div class="text-center">
    <img class="img-responsive" src="https://anandvyas.in/images/aws-sqs.jpg" alt="AWS Databases" />
</div>
 

<ul>
<li>Amazon SQS is a highly available distributed queue system</li>
<li>A queue is a temporary repository for messages awaiting for processing and acts as a buffer between the component producer and the consumer</li>
<li>Amazon SQS

<ul>
<li>offers a reliable, highly-scalable, hosted queue for storing messages in transit between computers</li>
<li>provides fault tolerant, loosely coupled, flexibility of distributed components of applications to send &amp; receive without requiring each component to be concurrently available</li>
<li>helps build distributed application with decoupled components</li>
<li>requires no administrative overhead and little configuration</li>
<li>supports the HTTP over SSL (HTTPS) and Transport Layer Security (TLS) protocols for security</li>
</ul></li>
<li>SQS provide at-least-once delivery of the messages.</li>
</ul>

<h3 id="a-name-aws-sqs-types-sqs-types-a"><a name="aws-sqs-types">SQS Types</a></h3>

<div class="text-center">
    <img class="img-responsive" src="https://anandvyas.in/images/types-of-queue.jpg" alt="AWS Databases" />
</div>
 

<h3 id="a-name-aws-sqs-features-sqs-features-key-points-a"><a name="aws-sqs-features">SQS Features &amp; Key Points</a></h3>

<ul>
<li><strong>Redundant infrastructure</strong>: Guarantees delivery of your messages at least once, highly concurrent access to messages, and high availability for sending and retrieving messages.</li>
<li><strong>At-Least-Once delivery</strong>:

<ul>
<li>Ensures delivery of each message at least once</li>
<li>Stores copies of the messages on multiple servers for redundancy and high availability</li>
<li>might deliver duplicate copy of messages, if the servers storing a copy of a message is unavailable when you receive or delete the message and the copy of the message is not deleted on that unavailable server</li>
<li>Applications should be designed to be idempotent with the ability to handle duplicate messages and not be adversely affected if it processes the same message more than once.</li>
</ul></li>
<li><strong>Message Attributes</strong> :

<ul>
<li>SQS message can contain up to 10 metadata attributes.</li>
<li>take the form of name-type-value triples</li>
<li>can be used to separate the body of a message from the metadata that describes it.</li>
<li>helps process and store information with greater speed and efficiency because the applications don’t have to inspect an entire message before understanding how to process it</li>
</ul></li>
<li><strong>Batching</strong>:

<ul>
<li>SQS allows send, receive and delete batching which helps club up to 10 messages in a single batch while charging price for a single message</li>
<li>helps lower cost and also increases the throughput</li>
</ul></li>
<li><strong>Loose coupling</strong>:

<ul>
<li>removes tight coupling between components</li>
<li>provides the ability to move data between distributed components of the applications that perform different tasks without losing messages or requiring each component to be always available</li>
</ul></li>
<li><strong>Multiple writers and readers</strong>:

<ul>
<li>supports multiple readers and writers interacting with the same queue as the same time</li>
<li>locks the message during processing, using Visibility Timeout, preventing it to be processed by any other consumer</li>
</ul></li>
<li><strong>Variable message size</strong>:

<ul>
<li>supports message in any format up to 256KB of text.</li>
<li>messages larger than 256 KB can be managed using the S3 or DynamoDB with SQS storing pointer</li>
</ul></li>
<li><strong>Access Control</strong>:

<ul>
<li>Access can be controlled for who can produce and consume messages to each queue</li>
</ul></li>
<li><strong>Delay Queues</strong>:

<ul>
<li>delay queue allows the user to set a default delay on a queue such that delivery of all messages enqueued is postponed for that time duration</li>
</ul></li>
<li><strong>Dead Letter Queues</strong>:

<ul>
<li>Dead letter queue is a queue for messages that were not able to be processed after a maximum number of attempts</li>
</ul></li>
<li><strong>PCI Compliance</strong>:

<ul>
<li>supports the processing, storage, and transmission of credit card data by a merchant or service provider, and has been validated as being PCI-DSS (Payment Card Industry – Data Security Standard) compliant</li>
</ul></li>
<li><strong>HIPAA compliance</strong>:

<ul>
<li>AWS has expanded its HIPAA (Health Insurance Portability and Accountability Act ) compliance program to include Amazon SQS as a HIPAA Eligible Service.</li>
</ul></li>
</ul>

<h3 id="a-name-aws-sqs-exam-tips-exam-tips-a"><a name="aws-sqs-exam-tips">Exam Tips</a></h3>

<ul>
<li>Loosely decouples the resources</li>
<li>It is a scalable messaging system</li>
<li>Queues are used to store messages that travel between different components of architecture</li>
<li>Each queue can have unlimited messages, and you can create unlimited queues</li>
<li>Components are called workers, thy keep polling the queue</li>
<li>Allows individual resource to scale up based on load</li>
<li>SQS guarantees delivery atleast once. So there can me more than 1 duplicate messages</li>
<li>Messages can be upto 256kb in size. can also attach instructions to access larger messages in dynamodb or s3</li>
<li>64kb is 1 billable message unit</li>
<li>Lifecycle:

<ol>
<li>Component 1 sends message to Q and the message is redundantly distributed across SQS server.</li>
<li>When component2 is ready, it retrieves and messages becomes invisible from queue for a period of visibility timeout.</li>
<li>Component2 deletes the message after successfully processing the message</li>
</ol></li>
<li>Short polling (default) : polls only a subset of SQS servers. Continuous short polling to get all messages. Each short poll is charged, there might be empty messages and be charged</li>
<li>Long polling: reduces cost as reduces number of empty messages</li>
<li>Long polling does not return a response till a message is available or till the long poll times out</li>
<li>Long polling has maximum timeout of 20 seconds</li>
<li>Delay queue(0sec to 12 hours): amount of time to delay the first message</li>
<li>Message retention period (1 minute to 14 days, default is 4 days): amount of time message will remain in queue if not deleted</li>
<li>Default visibility timeout 30 seconds ; can be upto 12 hours. ChangeMessageVisibility</li>
<li>Receive message wait time: If set &gt; 0, then long polling is enabled.</li>
<li>Upto 120k inflight messages</li>
<li>SQS does not guarantee the delivery order of the messages</li>
<li>If order is important, then sequencing info can be embedded in the message</li>
<li>Each message has a globally unique id which sqs returns when message is delivered to the queue</li>
<li>Dead letter queues are offered where one SQS can get messages from another SQS</li>
<li>SQS fanning out can be done using SNS topics where messages can be fanned out to other SQS queues</li>
<li>SQS Does not guarantee first in first out</li>
<li>Can send upto 10 attributes as metadata on each message. As name-type-value triplets</li>
<li>Queue names are limited to 80 characters, should be unique within an aws account</li>
<li>AWS might delete a queue if there is no activity for 30 days</li>
<li>Messages cannot be shared between queues in different regions</li>
<li>Common API

<ul>
<li>ChangeMessageVisibility : change visibility by worker</li>
<li>ChangeMessageVisibility : for upto 10 messages</li>
<li>SetQueueAttribues/GetQueueAttributes</li>
<li>VisibilityTimeout attribute to change default visibility timeout</li>
<li>ReceiveMessageWaitTimeSeconds (&gt;0 for long polling) max is 20 seconds</li>
<li>DelaySeconds</li>
<li>DeleteMessageBatch: deletes multiple message</li>
<li>SentTimestamp</li>
<li>GetQueueURL : returns URL for an existing queue</li>
<li>CreateQueue, ListQueue, SendMessage, SendMessageBatch&hellip;</li>
<li>PurgeQueue to delete all messages in the queue</li>
</ul></li>
<li>SQS service access point URL : <a href="http://sqs.amazonaws.com">http://sqs.amazonaws.com</a></li>
</ul>

<h3 id="a-name-aws-sqs-visibility-timeout-sqs-visibility-timeout-a"><a name="aws-sqs-visibility-timeout">SQS Visibility Timeout</a></h3>

<p>When a consumer receives and processes a message from a queue, the message remains in the queue. Amazon SQS doesn&rsquo;t automatically delete the message: Because it&rsquo;s a distributed system, there is no guarantee that the component will actually receive the message (the connection can break or a component can fail to receive the message). Thus, the consumer must delete the message from the queue after receiving and processing it.</p>

<p>Immediately after the message is received, it remains in the queue. To prevent other consumers from processing the message again, Amazon SQS sets a visibility timeout, a period of time during which Amazon SQS prevents other consuming components from receiving and processing the message.</p>

<p>A message is considered to be in flight after it&rsquo;s received from a queue by a consumer, but not yet deleted from the queue.</p>

<p>For standard queues, there can be a maximum of 120,000 inflight messages per queue. If you reach this limit, Amazon SQS returns the OverLimit error message. To avoid reaching the limit, you should delete messages from the queue after they&rsquo;re processed. You can also increase the number of queues you use to process your messages.</p>

<p>For FIFO queues, there can be a maximum of 20,000 inflight messages per queue. If you reach this limit, Amazon SQS returns no error messages.</p>

<div class="text-center">
    <img class="img-responsive" src="https://anandvyas.in/images/aws-sqs-visibility-timeout.png" alt="AWS SQS Visibility timeout" />
</div>
 

<h3 id="a-name-aws-sqs-design-patterns-sqs-design-patterns-a"><a name="aws-sqs-design-patterns">SQS Design Patterns</a></h3>

<ul>
<li><strong>Priority Queue Pattern</strong>
<div class="text-center">
    <img class="img-responsive" src="https://anandvyas.in/images/sqs-priority-queue.png" alt="AWS Databases" />
</div>
 

<ul>
<li>Use SQS to prepare multiple queues for the individual priority levels.</li>
<li>Place those processes to be executed immediately (job requests) in the high priority queue.</li>
<li>Prepare numbers of batch servers, for processing the job requests of the queues, depending on the priority levels.</li>
<li>Queues have a message “Delayed Send” function, which can be used to delay the time for starting a process.</li>
</ul></li>
<li><strong>SQS Job Observer Pattern</strong>
<div class="text-center">
    <img class="img-responsive" src="https://anandvyas.in/images/Job-Observer-Pattern-with-SQS.png" alt="AWS Databases" />
</div>
 

<ul>
<li>Enqueue job requests as SQS messages.</li>
<li>Have the batch server dequeue and process messages from SQS.</li>
<li>Set up Auto Scaling to automatically increase or decrease the number of batch servers, using the number of SQS messages, with CloudWatch, as the trigger to do so.</li>
</ul></li>
</ul>

<h3 id="a-name-aws-sqs-message-lifecycle-sqs-message-lifecycle-a"><a name="aws-sqs-message-lifecycle">SQS Message Lifecycle</a></h3>

<div class="text-center">
    <img class="img-responsive" src="https://anandvyas.in/images/aws-sqs-message-lifecycle.png" alt="AWS SQS Message Lifecycle" />
</div>
 

<ol>
<li>Component 1 sends Message A to a queue, and the message is redundantly distributed across the SQS servers.</li>
<li>When Component 2 is ready to process a message, it retrieves messages from the queue, and Message A is returned. While Message A is being processed, it remains in the queue but is not returned to subsequent receive requests for the duration of the visibility timeout.</li>
<li>Component 2 deletes Message A from the queue to avoid the message being received and processed again once the visibility timeout expires.</li>
</ol>

<h3 id="a-name-aws-sqs-pricing-sqs-pricing-a"><a name="aws-sqs-pricing">SQS Pricing</a></h3>

<p>The first 1 million monthly requests are free. After that, the pricing is as follows for all regions:</p>

<table>
<thead>
<tr>
<th>&nbsp;</th>
<th>Price per 1 Million Requests after Free Tier (Monthly)</th>
</tr>
</thead>

<tbody>
<tr>
<td>Standard Queue</td>
<td>$0.40 ($0.00000040 per request)</td>
</tr>

<tr>
<td>FIFO Queue</td>
<td>$0.50 ($0.00000050 per request)</td>
</tr>
</tbody>
</table>

<h3 id="a-name-aws-sqs-video-tutorial-sqs-tutorial-a"><a name="aws-sqs-video-tutorial">SQS Tutorial</a></h3>

<div align="center">
    <video width="620" height="440" controls>
    <source src="https://anandvyas.in/videos/services/SQS.mp4" type="video/mp4">
    Your browser does not support the video tag.
    </video>
</div>

<h3 id="a-name-aws-sqs-quiz-quiz-aws-sqs-a"><a name="aws-sqs-quiz">Quiz: AWS SQS</a></h3>



<script>
    var quiz = [{"correct":[1],"explanation":"","image":"","options":["Elastic IP Address","SQS","Amazon CloudWatch","Amazon ElastiCache"],"question":"Which AWS service can help design architecture to persist in-flight transactions?"},{"correct":[3],"explanation":"","image":"","options":["SQS guarantees the order of the messages.","SQS synchronously provides transcoding output.","SQS checks the health of the worker instances.","SQS helps to facilitate horizontal scaling of encoding tasks"],"question":"A company has a workflow that sends video files from their on-premise system to AWS for transcoding. They use EC2 worker instances that pull transcoding jobs from SQS. Why is SQS an appropriate service for this scenario?"},{"correct":[1],"explanation":"","image":"","options":["Automate the process of sending an email notification to administrators when the CPU utilization reaches 70% on production servers (Amazon EC2 instances)","Create a video transcoding website where multiple components need to communicate with each other, but can’t all process the same amount of work simultaneously","Coordinate work across distributed web services to process employee’s expense reports","Distribute static web content to end users with low latency across multiple countries"],"question":"Which statement best describes an Amazon SQS use case"},{"correct":[2],"explanation":"","image":"","options":["Use a DynamoDB table with an attribute defining the priority level. Transformation instances will scan the table for tasks, sorting the results by priority level.","Use Route 53 latency based-routing to send high priority tasks to the closest transformation instances.","Use two SQS queues, one for high priority messages, and the other for default priority. Transformation instances first poll the high priority queue; if there is no message, they poll the default priority queue","Use a single SQS queue. Each message contains the priority level. Transformation instances poll high-priority messages first."],"question":"Your application provides data transformation services. Files containing data to be transformed are first uploaded to Amazon S3 and then transformed by a fleet of spot EC2 instances. Files submitted by your premium customers must be transformed with the highest priority. How should you implement such a system?"},{"correct":[1],"explanation":"","image":"","options":["Amazon RDS with provisioned IOPS up to the anticipated peak write throughput.","Amazon Simple Queue Service (SQS) for capturing the writes and draining the queue to write to the database","Amazon ElastiCache to store the writes until the writes are committed to the database.","Amazon DynamoDB with provisioned write throughput up to the anticipated peak write throughput."],"question":"Your company plans to host a large donation website on Amazon Web Services (AWS). You anticipate a large and undetermined amount of traffic that will create many database writes. To be certain that you do not drop any writes to a database hosted on AWS. Which service should you use?"},{"correct":[1],"explanation":"","image":"","options":["Use an Amazon Elastic Map Reduce (EMR) S3DistCp as a synchronization mechanism between the onpremises database and a Hadoop cluster on AWS.","Modify the application to write to an Amazon SQS queue and develop a worker process to flush the queue to the on-premises database","Modify the application to use DynamoDB to feed an EMR cluster which uses a map function to write to the on-premises database.","Provision an RDS read-replica database on AWS to handle the writes and synchronize the two databases using Data Pipeline."],"question":"A customer has a 10 GB AWS Direct Connect connection to an AWS region where they have a web application hosted on Amazon Elastic Computer Cloud (EC2). The application has dependencies on an on-premises mainframe database that uses a BASE (Basic Available. Sort stale Eventual consistency) rather than an ACID (Atomicity, Consistency, Isolation, Durability) consistency model. The application is exhibiting undesirable behavior because the database is not able to handle the volume of writes. How can you reduce the load on your on-premises database resources in the most cost-effective way?"},{"correct":[1],"explanation":"","image":"","options":["AWS SQS sends notification after 15 days for inactivity on queue","AWS SQS can delete queue after 30 days without notification","AWS SQS marks queue inactive after 30 days","AWS SQS notifies the user after 2 weeks and deletes the queue after 3 weeks."],"question":"An organization has created a Queue named “modularqueue” with SQS. The organization is not performing any operations such as SendMessage, ReceiveMessage, DeleteMessage, GetQueueAttributes, SetQueueAttributes, AddPermission, and RemovePermission on the queue. What can happen in this scenario?"},{"correct":[3],"explanation":"","image":"","options":["SendMessageBatch","DeleteMessageBatch","CreateQueue","DeleteMessageQueue"],"question":"A user is using the AWS SQS to decouple the services. Which of the below mentioned operations is not supported by SQS?"},{"correct":[0],"explanation":"","image":"","options":["Yes, since SQS by default stores message for 4 days","No, since SQS by default stores message for 1 day only","No, since SQS sends message to consumers who are available that time","Yes, since SQS will not delete message until it is delivered to all consumers"],"question":"A user has created a queue named “awsmodule” with SQS. One of the consumers of queue is down for 3 days and then becomes available. Will that component receive message from queue?"},{"correct":[0],"explanation":"","image":"","options":["http://sqs.us-east-1.amazonaws.com/123456789012/queue2","http://sqs.amazonaws.com/123456789012/queue2","http://sqs. 123456789012.us-east-1.amazonaws.com/queue2","http://123456789012.sqs.us-east-1.amazonaws.com/queue2"],"question":"A user has created a queue named “queue2” in US-East region with AWS SQS. The user’s AWS account ID is 123456789012. If the user wants to perform some action on this queue, which of the below Queue URL should he use?"},{"correct":[1],"explanation":"","image":"","options":["A user can never delete a queue manually. AWS deletes it after 30 days of inactivity on queue","It will delete the queue","It will initiate the delete but wait for four days before deleting until all messages are deleted automatically.","It will ask user to delete the messages first"],"question":"A user has created a queue named “myqueue” with SQS. There are four messages published to queue, which are not received by the consumer yet. If the user tries to delete the queue, what will happen?"},{"correct":[2],"explanation":"","image":"","options":["AWS Simple Notification Service","AWS Simple Workflow","AWS Simple Queue Service","AWS Simple Query Service"],"question":"A user has developed an application, which is required to send the data to a NoSQL database. The user wants to decouple the data sending such that the application keeps processing and sending data but does not wait for an acknowledgement of DB. Which of the below mentioned applications helps in this scenario?"},{"correct":[1],"explanation":"","image":"","options":["It is not possible to do this with SQS","You can use sequencing information on each message","You can do this with SQS but you also need to use SWF","Messages will arrive in the same order by default"],"question":"You are building an online store on AWS that uses SQS to process your customer orders. Your backend system needs those messages in the same sequence the customer orders have been put in. How can you achieve that?"},{"correct":[3],"explanation":"","image":"","options":["AWS Glacier","AWS Elastic Transcoder","AWS Simple Notification Service","AWS Simple Queue Service"],"question":"A user has created a photo editing software and hosted it on EC2. The software accepts requests from the user about the photo format and resolution and sends a message to S3 to enhance the picture accordingly. Which of the below mentioned AWS services will help make a scalable software with the AWS infrastructure in this scenario?"},{"correct":[3],"explanation":"","image":"/images/aws-sqs-quiz-1.jpg","options":["Reduce the overall time for executing jobs through parallel processing by allowing a busy EC2 instance that receives a message to pass it to the next instance in a daisy-chain setup.","Implement fault tolerance against EC2 instance failure since messages would remain in SQS and worn can continue with recovery of EC2 instances implement fault tolerance against SQS failure by backing up messages to S3.","Implement message passing between EC2 instances within a batch by exchanging messages through SOS.","Coordinate number of EC2 instances with number of job requests automatically thus Improving cost effectiveness","Handle high priority jobs before lower priority jobs by assigning a priority metadata field to SQS messages."],"question":"Refer to the architecture diagram of a batch processing solution using Simple Queue Service (SQS) to set up a message queue between EC2 instances, which are used as batch processors. Cloud Watch monitors the number of Job requests (queued messages) and an Auto Scaling group adds or deletes batch servers automatically based on parameters set in Cloud Watch alarms. You can use this architecture to implement which of the following features in a cost effective and efficient manner? "},{"correct":[2],"explanation":"","image":"","options":["By identifying a user by his unique id","By using unique cryptography","Amazon SQS queue has a configurable visibility timeout","Multiple readers can’t access the same message queue"],"question":"How does Amazon SQS allow multiple readers to access the same message queue without losing messages or processing them many times?"},{"correct":[2],"explanation":"","image":"","options":["AWS Elastic Transcoder","AWS Simple Notification Service","AWS Simple Queue Service","AWS Glacier"],"question":"A user has created photo editing software and hosted it on EC2. The software accepts requests from the user about the photo format and resolution and sends a message to S3 to enhance the picture accordingly. Which of the below mentioned AWS services will help make a scalable software with the AWS infrastructure in this scenario?"},{"correct":[0],"explanation":"","image":"","options":["Set the MessageRetentionPeriod attribute using the SetQueueAttributes method","Using a Lambda function","You can’t. It is set to 14 days and cannot be changed","You need to request it from AWS"],"question":"How do you configure SQS to support longer message retention?"},{"correct":[3],"explanation":"","image":"","options":["AWS Simple Notification Service","AWS Simple Workflow","AWS Simple Query Service","AWS Simple Queue Service"],"question":"A user has developed an application, which is required to send the data to a NoSQL database. The user wants to decouple the data sending such that the application keeps processing and sending data but does not wait for an acknowledgement of DB. Which of the below mentioned applications helps in this scenario?"},{"correct":[4],"explanation":"","image":"","options":["0 seconds","1 hour","1 day","forever","30 seconds"],"question":"If a message is retrieved from a queue in Amazon SQS, how long is the message inaccessible to other users by default?"},{"correct":[3],"explanation":"","image":"","options":["Messages will be delivered exactly once and messages will be delivered in First in, First out order","Messages will be delivered exactly once and message delivery order is indeterminate","Messages will be delivered one or more times and messages will be delivered in First in, First out order","Messages will be delivered one or more times and message delivery order is indeterminate (Before the introduction of FIFO queues)"],"question":"Which of the following statements about SQS is true?"},{"correct":[2],"explanation":"","image":"","options":["From 120 secs up to 4 weeks","From 10 secs up to 7 days","From 60 secs up to 2 weeks","From 30 secs up to 1 week"],"question":"How long can you keep your Amazon SQS messages in Amazon SQS queues?"},{"correct":[0],"explanation":"","image":"","options":["Retrieve the message with an increased visibility timeout, process the message, delete the message from the queue","Retrieve the message with an increased visibility timeout, delete the message from the queue, process the message","Retrieve the message with increased DelaySeconds, process the message, delete the message from the queue","Retrieve the message with increased DelaySeconds, delete the message from the queue, process the message"],"question":"When a Simple Queue Service message triggers a task that takes 5 minutes to complete, which process below will result in successful processing of the message and remove it from the queue while minimizing the chances of duplicate processing?"},{"correct":[2],"explanation":"","image":"","options":["Use an SNS queue and set the visibility timeout to long enough for jobs to process.","Use an SQS queue and set the reprocessing timeout to long enough for jobs to process.","Use an SQS queue and set the visibility timeout to long enough for jobs to process.","Use an SNS queue and set the reprocessing timeout to long enough for jobs to process."],"question":"You need to process long-running jobs once and only once. How might you do this?"},{"correct":[1],"explanation":"","image":"","options":["Subscribe your queue to an SNS topic instead.","Use as long of a poll as possible, instead of short polls.","Alter your visibility timeout to be shorter.","Use \u003ccode\u003esqsd\u003c/code\u003e on your EC2 instances."],"question":"You are getting a lot of empty receive requests when using Amazon SQS. This is making a lot of unnecessary network load on your instances. What can you do to reduce this load?"},{"correct":[1],"explanation":"","image":"","options":["Subscribe your queue to an SNS topic instead.","Use as long of a poll as possible, instead of short polls.","Alter your visibility timeout to be shorter.","Use \u003ccode\u003esqsd\u003c/code\u003e on your EC2 instances."],"question":"You have an asynchronous processing application using an Auto Scaling Group and an SQS Queue. The Auto Scaling Group scales according to the depth of the job queue. The completion velocity of the jobs has gone down, the Auto Scaling Group size has maxed out, but the inbound job velocity did not increase. What is a possible issue?"},{"correct":[1],"explanation":"","image":"","options":["Set the imaging queue visibility Timeout attribute to 20 seconds","Set the Imaging queue ReceiveMessageWaitTimeSeconds attribute to 20 seconds","Set the imaging queue MessageRetentionPeriod attribute to 20 seconds","Set the DelaySeconds parameter of a message to 20 seconds"],"question":"Company B provides an online image recognition service and utilizes SQS to decouple system components for scalability. The SQS consumers poll the imaging queue as often as possible to keep end-to-end throughput as high as possible. However, Company B is realizing that polling in tight loops is burning CPU cycles and increasing costs with empty responses. How can Company B reduce the number of empty responses?"}];
    var currentquestion = 0, score = 0, submt=true, picked = [];

    Array.prototype.diff = function(arr2) {
        var ret = [];
        for(var i in this) {   
            if(arr2.indexOf( this[i] ) > -1){
                ret.push( this[i] );
            }
        }
        return ret;
    };
    
    Array.prototype.equals = function (array) {
        
        if (!array)
            return false;

        
        if (this.length != array.length)
            return false;

        for (var i = 0, l=this.length; i < l; i++) {
            
            if (this[i] instanceof Array && array[i] instanceof Array) {
                
                if (!this[i].equals(array[i]))
                    return false;       
            }           
            else if (this[i] != array[i]) { 
                
                return false;   
            }           
        }       
        return true;
    }

    
    Object.defineProperty(Array.prototype, "equals", {enumerable: false});

     
    jQuery(document).ready(function($){
        

        function htmlEncode(value){
          return $(document.createElement('div')).text(value).html();
        }
        

        function addChoices(choices){
            if(typeof choices !== "undefined" && $.type(choices) == "array"){
                $('#choice-block').empty();
                for(var i=0;i<choices.length; i++){
                    $(document.createElement('li')).addClass('choice choice-box').attr('data-index', i).text(choices[i]).appendTo('#choice-block');                    
                }
            }
        }
        
        

        function nextQuestion(){
            submt = true;
            picked = [];
            $('#explanation').empty();
            $('#question').text(quiz[currentquestion]['question']);
            $('#pager').text('Question ' + Number(currentquestion + 1) + ' of ' + quiz.length);
            if(quiz[currentquestion].hasOwnProperty('image') && quiz[currentquestion]['image'] != ""){
                if($('#question-image').length == 0){
                    $(document.createElement('img')).addClass('question-image').attr('id', 'question-image').attr('src', quiz[currentquestion]['image']).attr('alt', htmlEncode(quiz[currentquestion]['question'])).insertAfter('#question');
                } else {
                    $('#question-image').attr('src', quiz[currentquestion]['image']).attr('alt', htmlEncode(quiz[currentquestion]['question']));
                }
            } else {
                $('#question-image').remove();
            }
            addChoices(quiz[currentquestion]['options']);

            var multichoice = quiz[currentquestion]['correct'].length > 1 ? true : false;
            setupButtons(multichoice);
        }
        

        function processQuestion(choice){
            var flag = quiz[currentquestion]['correct'].equals(choice);
            if(flag){
                $('.choice').eq(choice).css({'background-color':'#50D943'});
                $('#explanation').html('<strong>Correct!</strong> ' + htmlEncode(quiz[currentquestion]['explanation']));
                score++;
            } else {
                $('.choice').eq(choice).css({'background-color':'#D92623'});
                $('#explanation').html('<strong>Incorrect.</strong> ' + htmlEncode(quiz[currentquestion]['explanation']));
            }
            currentquestion++;
            $('#submitbutton').html('NEXT QUESTION &raquo;').on('click', function(){
                if(currentquestion == quiz.length){
                    endQuiz();
                } else {
                    $(this).text('Check Answer').css({'color':'#222'}).off('click');
                    nextQuestion();
                }
            })
        }
        

        function setupButtons(multichoice){
            console.log(multichoice);
            $('.choice').on('click', function(){
                var curElement = $(this);
                var curElementIndex = curElement.attr('data-index');
                var myClass = curElement.attr("class");
                
                if(multichoice){
                    if(curElement.hasClass("selectedAns")){
                        var index = picked.indexOf(curElementIndex);
                        picked.splice(index, 1);
                        curElement.removeClass("selectedAns");
                    }else{
                        picked.push(parseInt(curElementIndex));
                        curElement.addClass("selectedAns");
                    }
                }else{
                    picked = [];
                    $('.choice').removeClass("selectedAns");
                    curElement.addClass("selectedAns");
                    picked.push(parseInt(curElementIndex));
                }
                
                
                if(submt){
                    submt=false;
                    $('#submitbutton').css({'color':'#000'}).on('click', function(){
                        $('.choice').off('click');
                        $(this).off('click');
                        processQuestion(picked);
                    });
                }
            })
        }
        
        

        function endQuiz(){
            $('#explanation').empty();
            $('#question').empty();
            $('#choice-block').empty();
            $('#submitbutton').remove();
            $('#question').text("You got " + score + " out of " + quiz.length + " correct.");
            $(document.createElement('h2')).css({'text-align':'center', 'font-size':'4em'}).text(Math.round(score/quiz.length * 100) + '%').insertAfter('#question');
        }
        

        function init(){
            

            
            if(typeof quiz !== "undefined" && $.type(quiz) === "array"){
                var container = $('#frame');
                quiz.forEach(function (row) {
                   
                });
                
                
                $(document.createElement('p')).addClass('pager').attr('id','pager').text('Question 1 of ' + quiz.length).appendTo('#frame');
                
                $(document.createElement('h2')).addClass('question').attr('id', 'question').text(quiz[0]['question']).appendTo('#frame');
                
                if(quiz[0].hasOwnProperty('image') && quiz[0]['image'] != ""){
                    $(document.createElement('img')).addClass('question-image').attr('id', 'question-image').attr('src', quiz[0]['image']).attr('alt', htmlEncode(quiz[0]['question'])).appendTo('#frame');
                }
                
                $(document.createElement('ul')).attr('id', 'choice-block').appendTo('#frame');
            
                
                addChoices(quiz[0]['options']);
                
                $(document.createElement('p')).addClass('explanation').attr('id','explanation').html('&nbsp;').appendTo('#frame');
                
                
                $(document.createElement('div')).addClass('choice-box').attr('id', 'submitbutton').text('Check Answer').css({'font-weight':700,'color':'#222','padding':'30px 0'}).appendTo('#frame');
                
                var multichoice = quiz[0]['correct'].length > 1 ? true : false;
                setupButtons(multichoice);
            }
        }
        init();
    });

</script>
<style>
    #frame {
        background-color: #fff;
        padding: 12px 20px;
        border-radius: 4px;
        border: 1px solid #d3e0e9;
    }

    .selectedAns {
        border-color: royalblue;
        background-color: burlywood;
    }
</style>
<div id="frame" role="content"></div>
        </div>
        
    </div>
    
    
    <footer class="sticky-footer">
    <div class="container">
        <div class="text-center">
            <small>Copyright © Anand Vyas 2019</small>
        </div>
    </div>
</footer>

<a class="scroll-to-top rounded" href="#page-top">
    <i class="fa fa-angle-up"></i>
</a>


<script src="https://anandvyas.in/js/popper.min.js"></script>
<script src="https://anandvyas.in/js/bootstrap.min.js"></script>
<script src="https://anandvyas.in/js/highlight.min.js"></script>
<script src="https://anandvyas.in/js/moment.min.js"></script>
<script src="https://anandvyas.in/js/clipboard.min.js"></script>

<script src="https://anandvyas.in/js/jquery.easing.min.js"></script>

<script src="https://anandvyas.in/js/sb-admin.js"></script>

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-108803266-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-108803266-1');
</script>
  </div>
<script data-no-instant>document.write('<script src="/livereload.js?port=1313&mindelay=10"></' + 'script>')</script></body>
</html>
